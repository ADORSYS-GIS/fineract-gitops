{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Fineract Loan Product Accounting",
  "description": "Schema for validating Fineract loan product GL account mappings",
  "type": "object",
  "required": ["apiVersion", "kind", "metadata", "spec"],
  "properties": {
    "apiVersion": {
      "type": "string",
      "enum": ["fineract.apache.org/v1"]
    },
    "kind": {
      "type": "string",
      "enum": ["LoanProductAccounting"]
    },
    "metadata": {
      "type": "object",
      "required": ["name"],
      "properties": {
        "name": {
          "type": "string",
          "pattern": "^[a-z0-9-]+$"
        },
        "labels": {
          "type": "object",
          "additionalProperties": {"type": "string"}
        }
      }
    },
    "spec": {
      "type": "object",
      "required": ["productName", "accountMappings"],
      "properties": {
        "productName": {
          "type": "string",
          "minLength": 1,
          "description": "Name of the loan product to configure accounting for"
        },
        "accountMappings": {
          "type": "array",
          "minItems": 1,
          "description": "List of GL account mappings for loan accounting",
          "items": {
            "type": "object",
            "required": ["mappingType", "glAccountCode"],
            "properties": {
              "mappingType": {
                "type": "string",
                "enum": [
                  "Fund Source",
                  "Loan Portfolio",
                  "Transfer in Suspense",
                  "Interest on Loans",
                  "Income from Fees",
                  "Income from Penalties",
                  "Income from Recovery",
                  "Losses Written Off",
                  "Overpayment Liability",
                  "Income from Charge Off Fees",
                  "Income from Charge Off Penalty",
                  "Charge Off Expense",
                  "Charge Off Fraud Expense",
                  "Income from Goodwill Credit Fees",
                  "Income from Goodwill Credit Interest",
                  "Income from Goodwill Credit Penalty"
                ],
                "description": "Type of accounting mapping"
              },
              "glAccountCode": {
                "type": "string",
                "minLength": 1,
                "description": "GL account code to map to this activity"
              }
            }
          }
        }
      }
    }
  }
}
