apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: fineract-dev

# Base configuration
resources:
- ../../base
# Note: Sealed secrets (keycloak-default-users, keycloak-client-secrets) are deployed
# separately via secrets/dev/ and do not need to be included here.
# The apply-keycloak-config job references these secrets from the cluster.

# Environment-specific ConfigMap for variables
configMapGenerator:
- name: keycloak-config-vars
  literals:
  - domain=dev.fineract.com
  - auth-hostname=acd587720ef3b437fbf4343ffd9a8f32-fdabdae8f44b0340.elb.eu-central-1.amazonaws.com
  - apps-hostname=acd587720ef3b437fbf4343ffd9a8f32-fdabdae8f44b0340.elb.eu-central-1.amazonaws.com
  - keycloak-url=http://keycloak-service:8080  # Internal service URL (Keycloak 17+ serves from root)
  - smtp-host=email-smtp.us-east-2.amazonaws.com
  - smtp-port=587

# Labels for dev environment
labels:
- pairs:
    environment: dev
