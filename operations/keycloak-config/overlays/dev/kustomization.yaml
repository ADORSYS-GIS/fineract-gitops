apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: fineract-dev

# Base configuration
resources:
- ../../base
# Note: Sealed secrets (keycloak-default-users, keycloak-client-secrets) are deployed
# separately via secrets/dev/ and do not need to be included here.
# The apply-keycloak-config job references these secrets from the cluster.

# Environment-specific ConfigMap for variables
configMapGenerator:
- name: keycloak-config-vars
  literals:
  - domain=dev.fineract.com
  - auth-hostname=a566e7aaa1eec4bf280c1e43ebe7eeff-1f98305d0728866e.elb.eu-central-1.amazonaws.com
  - apps-hostname=a566e7aaa1eec4bf280c1e43ebe7eeff-1f98305d0728866e.elb.eu-central-1.amazonaws.com
  - keycloak-url=http://keycloak-service:8080/auth  # Internal service URL with /auth path
  - smtp-host=email-smtp.us-east-2.amazonaws.com
  - smtp-port=587

# Labels for dev environment
labels:
- pairs:
    environment: dev
