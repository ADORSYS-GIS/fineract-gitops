apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: fineract-dev

# Base configuration
resources:
- ../../base
# Note: Sealed secrets (keycloak-default-users, keycloak-client-secrets) are deployed
# separately via secrets/dev/ and do not need to be included here.
# The apply-keycloak-config job references these secrets from the cluster.

# Environment-specific ConfigMap for variables
configMapGenerator:
- name: keycloak-config-vars
  literals:
  - domain=dev.fineract.com
  - auth-hostname=a0f502727535147dfa54da5ebf550259-5f54df3f4ec2ce5c.elb.eu-central-1.amazonaws.com
  - apps-hostname=a0f502727535147dfa54da5ebf550259-5f54df3f4ec2ce5c.elb.eu-central-1.amazonaws.com
  - keycloak-url=http://keycloak-service:8080/auth  # Internal service URL with /auth path
  - smtp-host=email-smtp.us-east-2.amazonaws.com
  - smtp-port=587

# Labels for dev environment
labels:
- pairs:
    environment: dev
