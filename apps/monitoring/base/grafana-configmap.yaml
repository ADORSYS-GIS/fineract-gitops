apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-datasources
  namespace: monitoring
  labels:
    app.kubernetes.io/name: grafana
data:
  datasources.yaml: |
    apiVersion: 1
    datasources:
    - name: Prometheus
      type: prometheus
      uid: prometheus
      access: proxy
      url: http://prometheus:9090
      isDefault: true
      editable: false
      jsonData:
        timeInterval: 30s
    - name: Loki
      type: loki
      uid: loki
      access: proxy
      url: http://loki.logging.svc.cluster.local:3100
      editable: false
      jsonData:
        maxLines: 1000
    - name: Jaeger
      type: jaeger
      uid: jaeger
      access: proxy
      url: http://jaeger-query.tracing.svc.cluster.local:16686
      editable: false
      jsonData:
        tracesToLogsV2:
          datasourceUid: 'loki'
          spanStartTimeShift: '-1h'
          spanEndTimeShift: '1h'
          filterByTraceID: true
          filterBySpanID: true
        tracesToMetrics:
          datasourceUid: 'prometheus'
          spanStartTimeShift: '-1h'
          spanEndTimeShift: '1h'
        nodeGraph:
          enabled: true
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboards-config
  namespace: monitoring
  labels:
    app.kubernetes.io/name: grafana
data:
  dashboards.yaml: |
    apiVersion: 1
    providers:
    - name: 'default'
      orgId: 1
      folder: 'Fineract'
      type: file
      disableDeletion: false
      updateIntervalSeconds: 10
      allowUiUpdates: true
      options:
        path: /var/lib/grafana/dashboards
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboards
  namespace: monitoring
  labels:
    app.kubernetes.io/name: grafana
data:
  cluster-overview.json: |
    {
      "uid": "cluster-overview",
      "title": "Kubernetes Cluster Overview",
      "tags": ["kubernetes", "cluster", "infrastructure"],
      "timezone": "browser",
      "schemaVersion": 39,
      "version": 1,
      "editable": true,
      "refresh": "30s",
      "time": {"from": "now-1h", "to": "now"},
      "panels": [
        {
          "id": 1,
          "title": "Nodes",
          "type": "stat",
          "gridPos": {"x": 0, "y": 0, "w": 4, "h": 4},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "count(kube_node_info)", "legendFormat": "Nodes"}],
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"steps": [{"color": "green", "value": null}]}}}
        },
        {
          "id": 2,
          "title": "Running Pods",
          "type": "stat",
          "gridPos": {"x": 4, "y": 0, "w": 4, "h": 4},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "sum(kube_pod_status_phase{phase=\"Running\"})", "legendFormat": "Running"}],
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"steps": [{"color": "green", "value": null}]}}}
        },
        {
          "id": 3,
          "title": "Pending Pods",
          "type": "stat",
          "gridPos": {"x": 8, "y": 0, "w": 4, "h": 4},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "sum(kube_pod_status_phase{phase=\"Pending\"}) or vector(0)", "legendFormat": "Pending"}],
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"steps": [{"color": "green", "value": null}, {"color": "yellow", "value": 1}, {"color": "red", "value": 5}]}}}
        },
        {
          "id": 4,
          "title": "Failed Pods",
          "type": "stat",
          "gridPos": {"x": 12, "y": 0, "w": 4, "h": 4},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "sum(kube_pod_status_phase{phase=\"Failed\"}) or vector(0)", "legendFormat": "Failed"}],
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"steps": [{"color": "green", "value": null}, {"color": "red", "value": 1}]}}}
        },
        {
          "id": 5,
          "title": "Cluster CPU Usage",
          "type": "gauge",
          "gridPos": {"x": 16, "y": 0, "w": 4, "h": 4},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "sum(rate(container_cpu_usage_seconds_total{container!=\"\"}[5m])) / sum(kube_node_status_allocatable{resource=\"cpu\"}) * 100", "legendFormat": "CPU %"}],
          "fieldConfig": {"defaults": {"unit": "percent", "min": 0, "max": 100, "thresholds": {"steps": [{"color": "green", "value": null}, {"color": "yellow", "value": 70}, {"color": "red", "value": 85}]}}}
        },
        {
          "id": 6,
          "title": "Cluster Memory Usage",
          "type": "gauge",
          "gridPos": {"x": 20, "y": 0, "w": 4, "h": 4},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "sum(container_memory_working_set_bytes{container!=\"\"}) / sum(kube_node_status_allocatable{resource=\"memory\"}) * 100", "legendFormat": "Memory %"}],
          "fieldConfig": {"defaults": {"unit": "percent", "min": 0, "max": 100, "thresholds": {"steps": [{"color": "green", "value": null}, {"color": "yellow", "value": 70}, {"color": "red", "value": 85}]}}}
        },
        {
          "id": 7,
          "title": "CPU Usage by Node",
          "type": "timeseries",
          "gridPos": {"x": 0, "y": 4, "w": 12, "h": 8},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "sum(rate(container_cpu_usage_seconds_total{container!=\"\"}[5m])) by (node)", "legendFormat": "{{node}}"}],
          "fieldConfig": {"defaults": {"unit": "short", "custom": {"drawStyle": "line", "fillOpacity": 10}}}
        },
        {
          "id": 8,
          "title": "Memory Usage by Node",
          "type": "timeseries",
          "gridPos": {"x": 12, "y": 4, "w": 12, "h": 8},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "sum(container_memory_working_set_bytes{container!=\"\"}) by (node) / 1024 / 1024 / 1024", "legendFormat": "{{node}}"}],
          "fieldConfig": {"defaults": {"unit": "decgbytes", "custom": {"drawStyle": "line", "fillOpacity": 10}}}
        },
        {
          "id": 9,
          "title": "Pods by Namespace",
          "type": "piechart",
          "gridPos": {"x": 0, "y": 12, "w": 8, "h": 8},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "sum(kube_pod_status_phase{phase=\"Running\"}) by (namespace)", "legendFormat": "{{namespace}}"}],
          "options": {"legend": {"displayMode": "table", "placement": "right"}}
        },
        {
          "id": 10,
          "title": "Pod Restarts (Last 1h)",
          "type": "table",
          "gridPos": {"x": 8, "y": 12, "w": 16, "h": 8},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "sort_desc(sum(increase(kube_pod_container_status_restarts_total[1h])) by (namespace, pod) > 0)", "format": "table", "instant": true}],
          "transformations": [{"id": "organize", "options": {"excludeByName": {"Time": true}, "renameByName": {"namespace": "Namespace", "pod": "Pod", "Value": "Restarts"}}}],
          "fieldConfig": {"defaults": {"custom": {"align": "left"}}}
        },
        {
          "id": 11,
          "title": "Network Receive by Pod",
          "type": "timeseries",
          "gridPos": {"x": 0, "y": 20, "w": 12, "h": 8},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "sum(rate(container_network_receive_bytes_total[5m])) by (pod) > 0", "legendFormat": "{{pod}}"}],
          "fieldConfig": {"defaults": {"unit": "Bps", "custom": {"drawStyle": "line", "fillOpacity": 10}}}
        },
        {
          "id": 12,
          "title": "Network Transmit by Pod",
          "type": "timeseries",
          "gridPos": {"x": 12, "y": 20, "w": 12, "h": 8},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "sum(rate(container_network_transmit_bytes_total[5m])) by (pod) > 0", "legendFormat": "{{pod}}"}],
          "fieldConfig": {"defaults": {"unit": "Bps", "custom": {"drawStyle": "line", "fillOpacity": 10}}}
        }
      ]
    }

  fineract-application.json: |
    {
      "uid": "fineract-app",
      "title": "Fineract Application",
      "tags": ["fineract", "application", "jvm"],
      "timezone": "browser",
      "schemaVersion": 39,
      "version": 1,
      "editable": true,
      "refresh": "30s",
      "time": {"from": "now-1h", "to": "now"},
      "panels": [
        {
          "id": 1,
          "title": "Application Status",
          "type": "stat",
          "gridPos": {"x": 0, "y": 0, "w": 4, "h": 4},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "up{job=~\".*fineract.*\"}", "legendFormat": ""}],
          "fieldConfig": {"defaults": {"mappings": [{"type": "value", "options": {"0": {"text": "DOWN", "color": "red"}, "1": {"text": "UP", "color": "green"}}}]}}
        },
        {
          "id": 2,
          "title": "Request Rate",
          "type": "stat",
          "gridPos": {"x": 4, "y": 0, "w": 4, "h": 4},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "sum(rate(http_server_requests_seconds_count{app=\"fineract\"}[5m])) or vector(0)", "legendFormat": "req/s"}],
          "fieldConfig": {"defaults": {"unit": "reqps", "color": {"mode": "thresholds"}, "thresholds": {"steps": [{"color": "green", "value": null}]}}}
        },
        {
          "id": 3,
          "title": "Error Rate",
          "type": "stat",
          "gridPos": {"x": 8, "y": 0, "w": 4, "h": 4},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "sum(rate(http_server_requests_seconds_count{app=\"fineract\",status=~\"5..\"}[5m])) / sum(rate(http_server_requests_seconds_count{app=\"fineract\"}[5m])) * 100 or vector(0)", "legendFormat": ""}],
          "fieldConfig": {"defaults": {"unit": "percent", "thresholds": {"steps": [{"color": "green", "value": null}, {"color": "yellow", "value": 1}, {"color": "red", "value": 5}]}}}
        },
        {
          "id": 4,
          "title": "P95 Latency",
          "type": "stat",
          "gridPos": {"x": 12, "y": 0, "w": 4, "h": 4},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "histogram_quantile(0.95, sum(rate(http_server_requests_seconds_bucket{app=\"fineract\"}[5m])) by (le)) * 1000 or vector(0)", "legendFormat": ""}],
          "fieldConfig": {"defaults": {"unit": "ms", "thresholds": {"steps": [{"color": "green", "value": null}, {"color": "yellow", "value": 500}, {"color": "red", "value": 1000}]}}}
        },
        {
          "id": 5,
          "title": "JVM Heap Used",
          "type": "gauge",
          "gridPos": {"x": 16, "y": 0, "w": 4, "h": 4},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "sum(jvm_memory_used_bytes{app=\"fineract\",area=\"heap\"}) / sum(jvm_memory_max_bytes{app=\"fineract\",area=\"heap\"}) * 100 or vector(0)", "legendFormat": ""}],
          "fieldConfig": {"defaults": {"unit": "percent", "min": 0, "max": 100, "thresholds": {"steps": [{"color": "green", "value": null}, {"color": "yellow", "value": 70}, {"color": "red", "value": 85}]}}}
        },
        {
          "id": 6,
          "title": "Active Threads",
          "type": "stat",
          "gridPos": {"x": 20, "y": 0, "w": 4, "h": 4},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "sum(jvm_threads_live_threads{app=\"fineract\"}) or vector(0)", "legendFormat": ""}],
          "fieldConfig": {"defaults": {"thresholds": {"steps": [{"color": "green", "value": null}]}}}
        },
        {
          "id": 7,
          "title": "Request Rate Over Time",
          "type": "timeseries",
          "gridPos": {"x": 0, "y": 4, "w": 12, "h": 8},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [
            {"expr": "sum(rate(http_server_requests_seconds_count{app=\"fineract\",status=~\"2..\"}[5m]))", "legendFormat": "2xx"},
            {"expr": "sum(rate(http_server_requests_seconds_count{app=\"fineract\",status=~\"4..\"}[5m]))", "legendFormat": "4xx"},
            {"expr": "sum(rate(http_server_requests_seconds_count{app=\"fineract\",status=~\"5..\"}[5m]))", "legendFormat": "5xx"}
          ],
          "fieldConfig": {"defaults": {"unit": "reqps", "custom": {"drawStyle": "line", "fillOpacity": 10}}}
        },
        {
          "id": 8,
          "title": "Response Time Percentiles",
          "type": "timeseries",
          "gridPos": {"x": 12, "y": 4, "w": 12, "h": 8},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [
            {"expr": "histogram_quantile(0.50, sum(rate(http_server_requests_seconds_bucket{app=\"fineract\"}[5m])) by (le)) * 1000", "legendFormat": "p50"},
            {"expr": "histogram_quantile(0.95, sum(rate(http_server_requests_seconds_bucket{app=\"fineract\"}[5m])) by (le)) * 1000", "legendFormat": "p95"},
            {"expr": "histogram_quantile(0.99, sum(rate(http_server_requests_seconds_bucket{app=\"fineract\"}[5m])) by (le)) * 1000", "legendFormat": "p99"}
          ],
          "fieldConfig": {"defaults": {"unit": "ms", "custom": {"drawStyle": "line", "fillOpacity": 10}}}
        },
        {
          "id": 9,
          "title": "JVM Memory",
          "type": "timeseries",
          "gridPos": {"x": 0, "y": 12, "w": 12, "h": 8},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [
            {"expr": "sum(jvm_memory_used_bytes{app=\"fineract\",area=\"heap\"}) / 1024 / 1024", "legendFormat": "Heap Used"},
            {"expr": "sum(jvm_memory_max_bytes{app=\"fineract\",area=\"heap\"}) / 1024 / 1024", "legendFormat": "Heap Max"},
            {"expr": "sum(jvm_memory_used_bytes{app=\"fineract\",area=\"nonheap\"}) / 1024 / 1024", "legendFormat": "Non-Heap"}
          ],
          "fieldConfig": {"defaults": {"unit": "decmbytes", "custom": {"drawStyle": "line", "fillOpacity": 10}}}
        },
        {
          "id": 10,
          "title": "HikariCP Connection Pool",
          "type": "timeseries",
          "gridPos": {"x": 12, "y": 12, "w": 12, "h": 8},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [
            {"expr": "hikaricp_connections_active{app=\"fineract\"}", "legendFormat": "Active"},
            {"expr": "hikaricp_connections_idle{app=\"fineract\"}", "legendFormat": "Idle"},
            {"expr": "hikaricp_connections_pending{app=\"fineract\"}", "legendFormat": "Pending"},
            {"expr": "hikaricp_connections_max{app=\"fineract\"}", "legendFormat": "Max"}
          ],
          "fieldConfig": {"defaults": {"custom": {"drawStyle": "line", "fillOpacity": 10}}}
        },
        {
          "id": 11,
          "title": "Top Endpoints by Request Count",
          "type": "table",
          "gridPos": {"x": 0, "y": 20, "w": 12, "h": 8},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "topk(10, sum(rate(http_server_requests_seconds_count{app=\"fineract\"}[5m])) by (uri))", "format": "table", "instant": true}],
          "transformations": [{"id": "organize", "options": {"excludeByName": {"Time": true}, "renameByName": {"uri": "Endpoint", "Value": "Requests/s"}}}]
        },
        {
          "id": 12,
          "title": "GC Pause Time",
          "type": "timeseries",
          "gridPos": {"x": 12, "y": 20, "w": 12, "h": 8},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "rate(jvm_gc_pause_seconds_sum{app=\"fineract\"}[5m])", "legendFormat": "{{gc}} {{action}}"}],
          "fieldConfig": {"defaults": {"unit": "s", "custom": {"drawStyle": "line", "fillOpacity": 10}}}
        }
      ]
    }

  keycloak.json: |
    {
      "uid": "keycloak",
      "title": "Keycloak Authentication",
      "tags": ["keycloak", "authentication", "security"],
      "timezone": "browser",
      "schemaVersion": 39,
      "version": 1,
      "editable": true,
      "refresh": "30s",
      "time": {"from": "now-1h", "to": "now"},
      "panels": [
        {
          "id": 1,
          "title": "Keycloak Status",
          "type": "stat",
          "gridPos": {"x": 0, "y": 0, "w": 4, "h": 4},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "up{job=~\".*keycloak.*\"}", "legendFormat": ""}],
          "fieldConfig": {"defaults": {"mappings": [{"type": "value", "options": {"0": {"text": "DOWN", "color": "red"}, "1": {"text": "UP", "color": "green"}}}]}}
        },
        {
          "id": 2,
          "title": "Active Sessions",
          "type": "stat",
          "gridPos": {"x": 4, "y": 0, "w": 4, "h": 4},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "sum(keycloak_sessions) or vector(0)", "legendFormat": ""}],
          "fieldConfig": {"defaults": {"thresholds": {"steps": [{"color": "green", "value": null}]}}}
        },
        {
          "id": 3,
          "title": "Login Rate",
          "type": "stat",
          "gridPos": {"x": 8, "y": 0, "w": 4, "h": 4},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "sum(rate(keycloak_logins_total[5m])) * 60 or vector(0)", "legendFormat": ""}],
          "fieldConfig": {"defaults": {"unit": "short", "thresholds": {"steps": [{"color": "green", "value": null}]}}}
        },
        {
          "id": 4,
          "title": "Failed Logins (1h)",
          "type": "stat",
          "gridPos": {"x": 12, "y": 0, "w": 4, "h": 4},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "sum(increase(keycloak_failed_login_attempts_total[1h])) or vector(0)", "legendFormat": ""}],
          "fieldConfig": {"defaults": {"thresholds": {"steps": [{"color": "green", "value": null}, {"color": "yellow", "value": 10}, {"color": "red", "value": 50}]}}}
        },
        {
          "id": 5,
          "title": "Login Success Rate",
          "type": "gauge",
          "gridPos": {"x": 16, "y": 0, "w": 4, "h": 4},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "sum(rate(keycloak_logins_total[5m])) / (sum(rate(keycloak_logins_total[5m])) + sum(rate(keycloak_failed_login_attempts_total[5m]))) * 100 or vector(100)", "legendFormat": ""}],
          "fieldConfig": {"defaults": {"unit": "percent", "min": 0, "max": 100, "thresholds": {"steps": [{"color": "red", "value": null}, {"color": "yellow", "value": 90}, {"color": "green", "value": 95}]}}}
        },
        {
          "id": 6,
          "title": "Request Rate",
          "type": "stat",
          "gridPos": {"x": 20, "y": 0, "w": 4, "h": 4},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "sum(rate(http_server_requests_seconds_count{app=\"keycloak\"}[5m])) or vector(0)", "legendFormat": ""}],
          "fieldConfig": {"defaults": {"unit": "reqps", "thresholds": {"steps": [{"color": "green", "value": null}]}}}
        },
        {
          "id": 7,
          "title": "Logins Over Time",
          "type": "timeseries",
          "gridPos": {"x": 0, "y": 4, "w": 12, "h": 8},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [
            {"expr": "sum(rate(keycloak_logins_total[5m])) * 60", "legendFormat": "Successful"},
            {"expr": "sum(rate(keycloak_failed_login_attempts_total[5m])) * 60", "legendFormat": "Failed"}
          ],
          "fieldConfig": {"defaults": {"unit": "short", "custom": {"drawStyle": "line", "fillOpacity": 10}}}
        },
        {
          "id": 8,
          "title": "Active Sessions Over Time",
          "type": "timeseries",
          "gridPos": {"x": 12, "y": 4, "w": 12, "h": 8},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "sum(keycloak_sessions) by (realm)", "legendFormat": "{{realm}}"}],
          "fieldConfig": {"defaults": {"custom": {"drawStyle": "line", "fillOpacity": 10}}}
        },
        {
          "id": 9,
          "title": "Response Time",
          "type": "timeseries",
          "gridPos": {"x": 0, "y": 12, "w": 12, "h": 8},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [
            {"expr": "histogram_quantile(0.50, sum(rate(http_server_requests_seconds_bucket{app=\"keycloak\"}[5m])) by (le)) * 1000", "legendFormat": "p50"},
            {"expr": "histogram_quantile(0.95, sum(rate(http_server_requests_seconds_bucket{app=\"keycloak\"}[5m])) by (le)) * 1000", "legendFormat": "p95"},
            {"expr": "histogram_quantile(0.99, sum(rate(http_server_requests_seconds_bucket{app=\"keycloak\"}[5m])) by (le)) * 1000", "legendFormat": "p99"}
          ],
          "fieldConfig": {"defaults": {"unit": "ms", "custom": {"drawStyle": "line", "fillOpacity": 10}}}
        },
        {
          "id": 10,
          "title": "JVM Memory",
          "type": "timeseries",
          "gridPos": {"x": 12, "y": 12, "w": 12, "h": 8},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [
            {"expr": "sum(jvm_memory_used_bytes{app=\"keycloak\",area=\"heap\"}) / 1024 / 1024", "legendFormat": "Heap Used"},
            {"expr": "sum(jvm_memory_max_bytes{app=\"keycloak\",area=\"heap\"}) / 1024 / 1024", "legendFormat": "Heap Max"}
          ],
          "fieldConfig": {"defaults": {"unit": "decmbytes", "custom": {"drawStyle": "line", "fillOpacity": 10}}}
        }
      ]
    }

  redis.json: |
    {
      "uid": "redis",
      "title": "Redis Cache",
      "tags": ["redis", "cache", "database"],
      "timezone": "browser",
      "schemaVersion": 39,
      "version": 1,
      "editable": true,
      "refresh": "30s",
      "time": {"from": "now-1h", "to": "now"},
      "panels": [
        {
          "id": 1,
          "title": "Redis Status",
          "type": "stat",
          "gridPos": {"x": 0, "y": 0, "w": 4, "h": 4},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "redis_up", "legendFormat": ""}],
          "fieldConfig": {"defaults": {"mappings": [{"type": "value", "options": {"0": {"text": "DOWN", "color": "red"}, "1": {"text": "UP", "color": "green"}}}]}}
        },
        {
          "id": 2,
          "title": "Connected Clients",
          "type": "stat",
          "gridPos": {"x": 4, "y": 0, "w": 4, "h": 4},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "redis_connected_clients", "legendFormat": ""}],
          "fieldConfig": {"defaults": {"thresholds": {"steps": [{"color": "green", "value": null}]}}}
        },
        {
          "id": 3,
          "title": "Memory Used",
          "type": "stat",
          "gridPos": {"x": 8, "y": 0, "w": 4, "h": 4},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "redis_memory_used_bytes / 1024 / 1024", "legendFormat": ""}],
          "fieldConfig": {"defaults": {"unit": "decmbytes", "thresholds": {"steps": [{"color": "green", "value": null}]}}}
        },
        {
          "id": 4,
          "title": "Hit Rate",
          "type": "gauge",
          "gridPos": {"x": 12, "y": 0, "w": 4, "h": 4},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "redis_keyspace_hits_total / (redis_keyspace_hits_total + redis_keyspace_misses_total) * 100 or vector(0)", "legendFormat": ""}],
          "fieldConfig": {"defaults": {"unit": "percent", "min": 0, "max": 100, "thresholds": {"steps": [{"color": "red", "value": null}, {"color": "yellow", "value": 80}, {"color": "green", "value": 95}]}}}
        },
        {
          "id": 5,
          "title": "Keys",
          "type": "stat",
          "gridPos": {"x": 16, "y": 0, "w": 4, "h": 4},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "sum(redis_db_keys) or vector(0)", "legendFormat": ""}],
          "fieldConfig": {"defaults": {"thresholds": {"steps": [{"color": "green", "value": null}]}}}
        },
        {
          "id": 6,
          "title": "Commands/sec",
          "type": "stat",
          "gridPos": {"x": 20, "y": 0, "w": 4, "h": 4},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "rate(redis_commands_processed_total[5m])", "legendFormat": ""}],
          "fieldConfig": {"defaults": {"unit": "ops", "thresholds": {"steps": [{"color": "green", "value": null}]}}}
        },
        {
          "id": 7,
          "title": "Memory Usage",
          "type": "timeseries",
          "gridPos": {"x": 0, "y": 4, "w": 12, "h": 8},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [
            {"expr": "redis_memory_used_bytes / 1024 / 1024", "legendFormat": "Used"},
            {"expr": "redis_memory_max_bytes / 1024 / 1024", "legendFormat": "Max"}
          ],
          "fieldConfig": {"defaults": {"unit": "decmbytes", "custom": {"drawStyle": "line", "fillOpacity": 10}}}
        },
        {
          "id": 8,
          "title": "Commands Over Time",
          "type": "timeseries",
          "gridPos": {"x": 12, "y": 4, "w": 12, "h": 8},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "rate(redis_commands_processed_total[5m])", "legendFormat": "Commands/s"}],
          "fieldConfig": {"defaults": {"unit": "ops", "custom": {"drawStyle": "line", "fillOpacity": 10}}}
        },
        {
          "id": 9,
          "title": "Hits vs Misses",
          "type": "timeseries",
          "gridPos": {"x": 0, "y": 12, "w": 12, "h": 8},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [
            {"expr": "rate(redis_keyspace_hits_total[5m])", "legendFormat": "Hits"},
            {"expr": "rate(redis_keyspace_misses_total[5m])", "legendFormat": "Misses"}
          ],
          "fieldConfig": {"defaults": {"unit": "ops", "custom": {"drawStyle": "line", "fillOpacity": 10}}}
        },
        {
          "id": 10,
          "title": "Connected Clients Over Time",
          "type": "timeseries",
          "gridPos": {"x": 12, "y": 12, "w": 12, "h": 8},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "redis_connected_clients", "legendFormat": "Clients"}],
          "fieldConfig": {"defaults": {"custom": {"drawStyle": "line", "fillOpacity": 10}}}
        }
      ]
    }

  logs-overview.json: |
    {
      "uid": "logs-overview",
      "title": "Logs Overview",
      "tags": ["logs", "loki", "observability"],
      "timezone": "browser",
      "schemaVersion": 39,
      "version": 1,
      "editable": true,
      "refresh": "30s",
      "time": {"from": "now-1h", "to": "now"},
      "panels": [
        {
          "id": 1,
          "title": "Log Volume by Namespace",
          "type": "timeseries",
          "gridPos": {"x": 0, "y": 0, "w": 24, "h": 8},
          "datasource": {"type": "loki", "uid": "loki"},
          "targets": [{"expr": "sum(count_over_time({namespace=~\".+\"}[1m])) by (namespace)", "legendFormat": "{{namespace}}"}],
          "fieldConfig": {"defaults": {"unit": "short", "custom": {"drawStyle": "bars", "fillOpacity": 80, "stacking": {"mode": "normal"}}}}
        },
        {
          "id": 2,
          "title": "Error Logs (Last 1h)",
          "type": "stat",
          "gridPos": {"x": 0, "y": 8, "w": 6, "h": 4},
          "datasource": {"type": "loki", "uid": "loki"},
          "targets": [{"expr": "sum(count_over_time({namespace=~\".+\"} |~ \"(?i)error|exception|fail\"[1h]))", "legendFormat": ""}],
          "fieldConfig": {"defaults": {"thresholds": {"steps": [{"color": "green", "value": null}, {"color": "yellow", "value": 100}, {"color": "red", "value": 500}]}}}
        },
        {
          "id": 3,
          "title": "Warning Logs (Last 1h)",
          "type": "stat",
          "gridPos": {"x": 6, "y": 8, "w": 6, "h": 4},
          "datasource": {"type": "loki", "uid": "loki"},
          "targets": [{"expr": "sum(count_over_time({namespace=~\".+\"} |~ \"(?i)warn\"[1h]))", "legendFormat": ""}],
          "fieldConfig": {"defaults": {"thresholds": {"steps": [{"color": "green", "value": null}, {"color": "yellow", "value": 200}]}}}
        },
        {
          "id": 4,
          "title": "Fineract Logs (Last 1h)",
          "type": "stat",
          "gridPos": {"x": 12, "y": 8, "w": 6, "h": 4},
          "datasource": {"type": "loki", "uid": "loki"},
          "targets": [{"expr": "sum(count_over_time({namespace=\"fineract-dev\"}[1h]))", "legendFormat": ""}],
          "fieldConfig": {"defaults": {"thresholds": {"steps": [{"color": "green", "value": null}]}}}
        },
        {
          "id": 5,
          "title": "Keycloak Logs (Last 1h)",
          "type": "stat",
          "gridPos": {"x": 18, "y": 8, "w": 6, "h": 4},
          "datasource": {"type": "loki", "uid": "loki"},
          "targets": [{"expr": "sum(count_over_time({namespace=\"keycloak\"}[1h]))", "legendFormat": ""}],
          "fieldConfig": {"defaults": {"thresholds": {"steps": [{"color": "green", "value": null}]}}}
        },
        {
          "id": 6,
          "title": "Recent Fineract Logs",
          "type": "logs",
          "gridPos": {"x": 0, "y": 12, "w": 24, "h": 10},
          "datasource": {"type": "loki", "uid": "loki"},
          "targets": [{"expr": "{namespace=\"fineract-dev\"}", "legendFormat": ""}],
          "options": {"showTime": true, "showLabels": true, "wrapLogMessage": true, "sortOrder": "Descending", "dedupStrategy": "none", "enableLogDetails": true}
        },
        {
          "id": 7,
          "title": "Recent Errors (All Namespaces)",
          "type": "logs",
          "gridPos": {"x": 0, "y": 22, "w": 24, "h": 10},
          "datasource": {"type": "loki", "uid": "loki"},
          "targets": [{"expr": "{namespace=~\".+\"} |~ \"(?i)error|exception\"", "legendFormat": ""}],
          "options": {"showTime": true, "showLabels": true, "wrapLogMessage": true, "sortOrder": "Descending", "dedupStrategy": "none", "enableLogDetails": true}
        }
      ]
    }

  frontend-apps.json: |
    {
      "uid": "frontend-apps",
      "title": "Frontend Applications",
      "tags": ["frontend", "nginx", "web"],
      "timezone": "browser",
      "schemaVersion": 39,
      "version": 1,
      "editable": true,
      "refresh": "30s",
      "time": {"from": "now-1h", "to": "now"},
      "panels": [
        {
          "id": 1,
          "title": "Frontend Apps Status",
          "type": "stat",
          "gridPos": {"x": 0, "y": 0, "w": 24, "h": 4},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "count(nginx_up{job=~\".*frontend.*|.*-app\"} == 1)", "legendFormat": "Apps Up"}],
          "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "thresholds": {"steps": [{"color": "red", "value": null}, {"color": "green", "value": 7}]}}}
        },
        {
          "id": 2,
          "title": "Active Connections by App",
          "type": "timeseries",
          "gridPos": {"x": 0, "y": 4, "w": 12, "h": 8},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "nginx_http_connections_active", "legendFormat": "{{pod}}"}],
          "fieldConfig": {"defaults": {"custom": {"drawStyle": "line", "fillOpacity": 10}}}
        },
        {
          "id": 3,
          "title": "Requests per Second by App",
          "type": "timeseries",
          "gridPos": {"x": 12, "y": 4, "w": 12, "h": 8},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "rate(nginx_http_requests_total[5m])", "legendFormat": "{{pod}}"}],
          "fieldConfig": {"defaults": {"unit": "reqps", "custom": {"drawStyle": "line", "fillOpacity": 10}}}
        },
        {
          "id": 4,
          "title": "Total Requests (All Frontend Apps)",
          "type": "stat",
          "gridPos": {"x": 0, "y": 12, "w": 6, "h": 4},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "sum(increase(nginx_http_requests_total[1h]))", "legendFormat": ""}],
          "fieldConfig": {"defaults": {"unit": "short", "thresholds": {"steps": [{"color": "green", "value": null}]}}}
        },
        {
          "id": 5,
          "title": "Reading Connections",
          "type": "stat",
          "gridPos": {"x": 6, "y": 12, "w": 6, "h": 4},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "sum(nginx_http_connections_reading)", "legendFormat": ""}],
          "fieldConfig": {"defaults": {"thresholds": {"steps": [{"color": "green", "value": null}]}}}
        },
        {
          "id": 6,
          "title": "Writing Connections",
          "type": "stat",
          "gridPos": {"x": 12, "y": 12, "w": 6, "h": 4},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "sum(nginx_http_connections_writing)", "legendFormat": ""}],
          "fieldConfig": {"defaults": {"thresholds": {"steps": [{"color": "green", "value": null}]}}}
        },
        {
          "id": 7,
          "title": "Waiting Connections",
          "type": "stat",
          "gridPos": {"x": 18, "y": 12, "w": 6, "h": 4},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "sum(nginx_http_connections_waiting)", "legendFormat": ""}],
          "fieldConfig": {"defaults": {"thresholds": {"steps": [{"color": "green", "value": null}]}}}
        },
        {
          "id": 8,
          "title": "Connection States by App",
          "type": "table",
          "gridPos": {"x": 0, "y": 16, "w": 24, "h": 8},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [
            {"expr": "nginx_http_connections_active", "format": "table", "instant": true, "legendFormat": "Active"},
            {"expr": "nginx_http_connections_reading", "format": "table", "instant": true, "legendFormat": "Reading"},
            {"expr": "nginx_http_connections_writing", "format": "table", "instant": true, "legendFormat": "Writing"},
            {"expr": "nginx_http_connections_waiting", "format": "table", "instant": true, "legendFormat": "Waiting"}
          ],
          "transformations": [
            {"id": "merge", "options": {}},
            {"id": "organize", "options": {"excludeByName": {"Time": true, "__name__": true, "job": true, "instance": true}, "renameByName": {"pod": "App", "Value #A": "Active", "Value #B": "Reading", "Value #C": "Writing", "Value #D": "Waiting"}}}
          ]
        }
      ]
    }

  infrastructure-nodes.json: |
    {
      "uid": "infrastructure-nodes",
      "title": "Infrastructure - Node Metrics",
      "tags": ["infrastructure", "nodes", "host"],
      "timezone": "browser",
      "schemaVersion": 39,
      "version": 1,
      "editable": true,
      "refresh": "30s",
      "time": {"from": "now-1h", "to": "now"},
      "panels": [
        {
          "id": 1,
          "title": "Node Count",
          "type": "stat",
          "gridPos": {"x": 0, "y": 0, "w": 4, "h": 4},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "count(node_uname_info)", "legendFormat": ""}],
          "fieldConfig": {"defaults": {"thresholds": {"steps": [{"color": "green", "value": null}]}}}
        },
        {
          "id": 2,
          "title": "Avg CPU Usage",
          "type": "gauge",
          "gridPos": {"x": 4, "y": 0, "w": 5, "h": 4},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "100 - (avg(rate(node_cpu_seconds_total{mode=\"idle\"}[5m])) * 100)", "legendFormat": ""}],
          "fieldConfig": {"defaults": {"unit": "percent", "min": 0, "max": 100, "thresholds": {"steps": [{"color": "green", "value": null}, {"color": "yellow", "value": 70}, {"color": "red", "value": 85}]}}}
        },
        {
          "id": 3,
          "title": "Avg Memory Usage",
          "type": "gauge",
          "gridPos": {"x": 9, "y": 0, "w": 5, "h": 4},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "(1 - (avg(node_memory_MemAvailable_bytes) / avg(node_memory_MemTotal_bytes))) * 100", "legendFormat": ""}],
          "fieldConfig": {"defaults": {"unit": "percent", "min": 0, "max": 100, "thresholds": {"steps": [{"color": "green", "value": null}, {"color": "yellow", "value": 70}, {"color": "red", "value": 85}]}}}
        },
        {
          "id": 4,
          "title": "Avg Disk Usage",
          "type": "gauge",
          "gridPos": {"x": 14, "y": 0, "w": 5, "h": 4},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "(1 - (avg(node_filesystem_avail_bytes{mountpoint=\"/\"}) / avg(node_filesystem_size_bytes{mountpoint=\"/\"}))) * 100", "legendFormat": ""}],
          "fieldConfig": {"defaults": {"unit": "percent", "min": 0, "max": 100, "thresholds": {"steps": [{"color": "green", "value": null}, {"color": "yellow", "value": 70}, {"color": "red", "value": 85}]}}}
        },
        {
          "id": 5,
          "title": "Network I/O",
          "type": "stat",
          "gridPos": {"x": 19, "y": 0, "w": 5, "h": 4},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "sum(rate(node_network_receive_bytes_total[5m])) + sum(rate(node_network_transmit_bytes_total[5m]))", "legendFormat": ""}],
          "fieldConfig": {"defaults": {"unit": "Bps", "thresholds": {"steps": [{"color": "green", "value": null}]}}}
        },
        {
          "id": 6,
          "title": "CPU Usage by Node",
          "type": "timeseries",
          "gridPos": {"x": 0, "y": 4, "w": 12, "h": 8},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "100 - (avg by (instance) (rate(node_cpu_seconds_total{mode=\"idle\"}[5m])) * 100)", "legendFormat": "{{instance}}"}],
          "fieldConfig": {"defaults": {"unit": "percent", "min": 0, "max": 100, "custom": {"drawStyle": "line", "fillOpacity": 10}}}
        },
        {
          "id": 7,
          "title": "Memory Usage by Node",
          "type": "timeseries",
          "gridPos": {"x": 12, "y": 4, "w": 12, "h": 8},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "(1 - (node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes)) * 100", "legendFormat": "{{instance}}"}],
          "fieldConfig": {"defaults": {"unit": "percent", "min": 0, "max": 100, "custom": {"drawStyle": "line", "fillOpacity": 10}}}
        },
        {
          "id": 8,
          "title": "Disk Usage by Node",
          "type": "timeseries",
          "gridPos": {"x": 0, "y": 12, "w": 12, "h": 8},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "(1 - (node_filesystem_avail_bytes{mountpoint=\"/\"} / node_filesystem_size_bytes{mountpoint=\"/\"})) * 100", "legendFormat": "{{instance}}"}],
          "fieldConfig": {"defaults": {"unit": "percent", "min": 0, "max": 100, "custom": {"drawStyle": "line", "fillOpacity": 10}}}
        },
        {
          "id": 9,
          "title": "Network Traffic by Node",
          "type": "timeseries",
          "gridPos": {"x": 12, "y": 12, "w": 12, "h": 8},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [
            {"expr": "sum by (instance) (rate(node_network_receive_bytes_total[5m]))", "legendFormat": "{{instance}} RX"},
            {"expr": "sum by (instance) (rate(node_network_transmit_bytes_total[5m]))", "legendFormat": "{{instance}} TX"}
          ],
          "fieldConfig": {"defaults": {"unit": "Bps", "custom": {"drawStyle": "line", "fillOpacity": 10}}}
        },
        {
          "id": 10,
          "title": "Load Average (1m)",
          "type": "timeseries",
          "gridPos": {"x": 0, "y": 20, "w": 12, "h": 8},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "node_load1", "legendFormat": "{{instance}}"}],
          "fieldConfig": {"defaults": {"custom": {"drawStyle": "line", "fillOpacity": 10}}}
        },
        {
          "id": 11,
          "title": "Disk I/O",
          "type": "timeseries",
          "gridPos": {"x": 12, "y": 20, "w": 12, "h": 8},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [
            {"expr": "sum by (instance) (rate(node_disk_read_bytes_total[5m]))", "legendFormat": "{{instance}} Read"},
            {"expr": "sum by (instance) (rate(node_disk_written_bytes_total[5m]))", "legendFormat": "{{instance}} Write"}
          ],
          "fieldConfig": {"defaults": {"unit": "Bps", "custom": {"drawStyle": "line", "fillOpacity": 10}}}
        }
      ]
    }

  slo-dashboard.json: |
    {
      "uid": "slo-dashboard",
      "title": "Service Level Objectives (SLO)",
      "tags": ["slo", "reliability", "sre"],
      "timezone": "browser",
      "schemaVersion": 39,
      "version": 1,
      "editable": true,
      "refresh": "1m",
      "time": {"from": "now-7d", "to": "now"},
      "panels": [
        {
          "id": 1,
          "title": "Fineract API Availability (Target: 99.9%)",
          "type": "gauge",
          "gridPos": {"x": 0, "y": 0, "w": 8, "h": 8},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "(1 - (sum(rate(http_server_requests_seconds_count{app=\"fineract\",status=~\"5..\"}[7d])) / sum(rate(http_server_requests_seconds_count{app=\"fineract\"}[7d])))) * 100 or vector(100)", "legendFormat": ""}],
          "fieldConfig": {"defaults": {"unit": "percent", "min": 99, "max": 100, "decimals": 3, "thresholds": {"steps": [{"color": "red", "value": null}, {"color": "yellow", "value": 99.5}, {"color": "green", "value": 99.9}]}}}
        },
        {
          "id": 2,
          "title": "Fineract API Latency P99 (Target: <500ms)",
          "type": "gauge",
          "gridPos": {"x": 8, "y": 0, "w": 8, "h": 8},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "histogram_quantile(0.99, sum(rate(http_server_requests_seconds_bucket{app=\"fineract\"}[7d])) by (le)) * 1000 or vector(0)", "legendFormat": ""}],
          "fieldConfig": {"defaults": {"unit": "ms", "min": 0, "max": 1000, "thresholds": {"steps": [{"color": "green", "value": null}, {"color": "yellow", "value": 300}, {"color": "red", "value": 500}]}}}
        },
        {
          "id": 3,
          "title": "Keycloak Availability (Target: 99.95%)",
          "type": "gauge",
          "gridPos": {"x": 16, "y": 0, "w": 8, "h": 8},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "(1 - (sum(rate(http_server_requests_seconds_count{app=\"keycloak\",status=~\"5..\"}[7d])) / sum(rate(http_server_requests_seconds_count{app=\"keycloak\"}[7d])))) * 100 or vector(100)", "legendFormat": ""}],
          "fieldConfig": {"defaults": {"unit": "percent", "min": 99, "max": 100, "decimals": 3, "thresholds": {"steps": [{"color": "red", "value": null}, {"color": "yellow", "value": 99.9}, {"color": "green", "value": 99.95}]}}}
        },
        {
          "id": 4,
          "title": "Fineract Error Budget (30-day)",
          "description": "Remaining error budget based on 99.9% SLO. 100% = full budget remaining, 0% = budget exhausted",
          "type": "stat",
          "gridPos": {"x": 0, "y": 8, "w": 12, "h": 4},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "clamp_min(((0.001 - (sum(rate(http_server_requests_seconds_count{app=\"fineract\",status=~\"5..\"}[30d])) / sum(rate(http_server_requests_seconds_count{app=\"fineract\"}[30d])))) / 0.001) * 100, 0) or vector(100)", "legendFormat": "Error Budget %"}],
          "fieldConfig": {"defaults": {"unit": "percent", "thresholds": {"steps": [{"color": "red", "value": null}, {"color": "yellow", "value": 25}, {"color": "green", "value": 50}]}}}
        },
        {
          "id": 5,
          "title": "Keycloak Error Budget (30-day)",
          "type": "stat",
          "gridPos": {"x": 12, "y": 8, "w": 12, "h": 4},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [{"expr": "clamp_min(((0.0005 - (sum(rate(http_server_requests_seconds_count{app=\"keycloak\",status=~\"5..\"}[30d])) / sum(rate(http_server_requests_seconds_count{app=\"keycloak\"}[30d])))) / 0.0005) * 100, 0) or vector(100)", "legendFormat": ""}],
          "fieldConfig": {"defaults": {"unit": "percent", "thresholds": {"steps": [{"color": "red", "value": null}, {"color": "yellow", "value": 25}, {"color": "green", "value": 50}]}}}
        },
        {
          "id": 6,
          "title": "Availability Over Time - Fineract",
          "type": "timeseries",
          "gridPos": {"x": 0, "y": 12, "w": 12, "h": 8},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [
            {"expr": "(1 - (sum(rate(http_server_requests_seconds_count{app=\"fineract\",status=~\"5..\"}[1h])) / sum(rate(http_server_requests_seconds_count{app=\"fineract\"}[1h])))) * 100 or vector(100)", "legendFormat": "Availability"},
            {"expr": "99.9", "legendFormat": "SLO (99.9%)"}
          ],
          "fieldConfig": {"defaults": {"unit": "percent", "min": 98, "max": 100, "custom": {"drawStyle": "line", "fillOpacity": 10}}}
        },
        {
          "id": 7,
          "title": "Latency Over Time - Fineract P99",
          "type": "timeseries",
          "gridPos": {"x": 12, "y": 12, "w": 12, "h": 8},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [
            {"expr": "histogram_quantile(0.99, sum(rate(http_server_requests_seconds_bucket{app=\"fineract\"}[5m])) by (le)) * 1000", "legendFormat": "P99 Latency"},
            {"expr": "500", "legendFormat": "SLO (500ms)"}
          ],
          "fieldConfig": {"defaults": {"unit": "ms", "custom": {"drawStyle": "line", "fillOpacity": 10}}}
        },
        {
          "id": 8,
          "title": "Error Rate Burn Rate (Multi-Window)",
          "description": "How fast the error budget is being consumed. >1 means burning faster than allowed",
          "type": "timeseries",
          "gridPos": {"x": 0, "y": 20, "w": 24, "h": 8},
          "datasource": {"type": "prometheus", "uid": "prometheus"},
          "targets": [
            {"expr": "(sum(rate(http_server_requests_seconds_count{app=\"fineract\",status=~\"5..\"}[1h])) / sum(rate(http_server_requests_seconds_count{app=\"fineract\"}[1h]))) / 0.001 or vector(0)", "legendFormat": "1h burn rate"},
            {"expr": "(sum(rate(http_server_requests_seconds_count{app=\"fineract\",status=~\"5..\"}[6h])) / sum(rate(http_server_requests_seconds_count{app=\"fineract\"}[6h]))) / 0.001 or vector(0)", "legendFormat": "6h burn rate"},
            {"expr": "1", "legendFormat": "Normal (1.0)"}
          ],
          "fieldConfig": {"defaults": {"custom": {"drawStyle": "line", "fillOpacity": 10}, "thresholds": {"steps": [{"color": "green", "value": null}, {"color": "yellow", "value": 1}, {"color": "red", "value": 10}]}}}
        }
      ]
    }
