# AlertManager Notification Secrets Template
# ===========================================
# This file is a TEMPLATE - do not commit actual secrets!
#
# To use this:
# 1. Copy this file and fill in your actual values
# 2. Seal the secret using kubeseal:
#    kubeseal --format yaml < alertmanager-secrets.yaml > alertmanager-secrets-sealed.yaml
# 3. Place the sealed secret in secrets/<environment>/alertmanager-secrets-sealed.yaml
#
# Required Slack Channels (create in your workspace):
# - #fineract-alerts (general alerts)
# - #fineract-alerts-critical (critical alerts)
# - #fineract-database-alerts (database alerts)
# - #fineract-security-alerts (security alerts)

apiVersion: v1
kind: Secret
metadata:
  name: alertmanager-notification-secrets
  namespace: monitoring
  labels:
    app.kubernetes.io/name: alertmanager
type: Opaque
stringData:
  # Slack Incoming Webhook URL
  # Create at: https://api.slack.com/apps > Your App > Incoming Webhooks
  # Format: https://hooks.slack.com/services/T.../B.../...
  SLACK_WEBHOOK_URL: "<YOUR-SLACK-WEBHOOK-URL-HERE>"

  # SMTP Configuration for Email Alerts
  # For Gmail: smtp.gmail.com:587 (use App Password, not regular password)
  # For AWS SES: email-smtp.us-east-1.amazonaws.com:587
  SMTP_SMARTHOST: "smtp.example.com:587"
  SMTP_USERNAME: "alertmanager@yourdomain.com"
  SMTP_PASSWORD: "your-smtp-password-or-app-specific-password"
  SMTP_FROM: "alertmanager@yourdomain.com"

  # Email Recipients (comma-separated for multiple)
  EMAIL_PLATFORM_ONCALL: "platform-oncall@yourdomain.com"
  EMAIL_DBA_TEAM: "dba-team@yourdomain.com"
  EMAIL_SECURITY_TEAM: "security-team@yourdomain.com"

---
# Example: How to use with SealedSecrets
#
# 1. Install kubeseal CLI
# 2. Get the public key from your cluster:
#    kubeseal --fetch-cert --controller-namespace=sealed-secrets > sealed-secrets.pem
#
# 3. Create the sealed secret:
#    kubeseal --cert sealed-secrets.pem --format yaml < alertmanager-secrets.yaml > alertmanager-secrets-sealed.yaml
#
# 4. The sealed secret can be safely committed to git
