apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Production environment overlay for cert-manager
# ⚠️  CRITICAL: These emails receive SSL certificate expiration warnings
# Ensure these emails are monitored 24/7 in production

resources:
  - ../../base

# Patch Let's Encrypt issuer emails for production environment
patches:
  - patch: |-
      apiVersion: cert-manager.io/v1
      kind: ClusterIssuer
      metadata:
        name: letsencrypt-staging
      spec:
        acme:
          # Platform team email for staging certificates (used for testing)
          # Change to your organization's platform/SRE team email
          email: platform-team@example.com
    target:
      kind: ClusterIssuer
      name: letsencrypt-staging

  - patch: |-
      apiVersion: cert-manager.io/v1
      kind: ClusterIssuer
      metadata:
        name: letsencrypt-prod
      spec:
        acme:
          # ⚠️  CRITICAL: This email receives production SSL expiration warnings
          # Notifications sent at 30 days and 7 days before expiry
          # Must be monitored to prevent service outages
          # Change to your organization's production oncall/SRE email
          email: platform-team@example.com
    target:
      kind: ClusterIssuer
      name: letsencrypt-prod

commonLabels:
  environment: production
  criticality: high
