apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

metadata:
  name: logging-stack

namespace: logging

resources:
  # Namespace
  - namespace.yaml

  # Loki
  - loki-statefulset.yaml
  - loki-service.yaml
  - loki-configmap.yaml

  # Promtail
  - promtail-daemonset.yaml
  - promtail-configmap.yaml
  - promtail-rbac.yaml

  # Pod Disruption Budget
  - pdb.yaml

# Use labels transformer to avoid adding labels to service selectors
labels:
  - pairs:
      app.kubernetes.io/part-of: logging-stack
      managed-by: argocd
    includeSelectors: false

commonAnnotations:
  component: "logging"
  purpose: "Centralized log aggregation for Fineract platform"
